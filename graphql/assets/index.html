<!DOCTYPE html>
<html>
    <head>
        <link rel="icon" type="image/png" href="favicon.png" />
        <link rel="stylesheet" type="text/css" href="graphiql.css" />
        <script src="fetch.min.js"></script>
        <script src="react.production.min.js"></script>
        <script src="react-dom.production.min.js"></script>
        <script src="graphiql.min.js"></script>
    </head>
    <body style="width: 100%; height: 100%; margin: 0; overflow: hidden;">
    <div id="graphiql" style="height: 100vh;">Loading...</div>
    <script>
        function fetchGQL(params) {
            return fetch("/graphql", {
                method: "post",
                body: JSON.stringify(params),
                credentials: "include",
            }).then(function (resp) {
                return resp.text();
            }).then(function (body) {
                try {
                    return JSON.parse(body);
                } catch (error) {
                    return body;
                }
            });
        }

        ReactDOM.render(
            React.createElement(GraphiQL, {fetcher: fetchGQL}),
            document.getElementById("graphiql")
        )
    </script>
    </body>
</html>
